(function(_0x5a0a10,_0x1aef5b){const _0x1eaf43=_0x2d2c,_0x5d35e4=_0x5a0a10();while(!![]){try{const _0x3906ab=-parseInt(_0x1eaf43(0x16a))/0x1+-parseInt(_0x1eaf43(0x170))/0x2*(parseInt(_0x1eaf43(0x1b2))/0x3)+parseInt(_0x1eaf43(0x16d))/0x4+parseInt(_0x1eaf43(0x174))/0x5+-parseInt(_0x1eaf43(0x15d))/0x6+-parseInt(_0x1eaf43(0x1a9))/0x7*(-parseInt(_0x1eaf43(0x147))/0x8)+parseInt(_0x1eaf43(0x1ad))/0x9*(-parseInt(_0x1eaf43(0x1ae))/0xa);if(_0x3906ab===_0x1aef5b)break;else _0x5d35e4['push'](_0x5d35e4['shift']());}catch(_0x25be85){_0x5d35e4['push'](_0x5d35e4['shift']());}}}(_0x5007,0x77cfb));const Logger=(function(){const _0x552173=_0x2d2c,_0x29c454={'EMPLOYEE_CREATE':_0x552173(0x187),'EMPLOYEE_UPDATE':'employee_update','EMPLOYEE_DELETE':'employee_delete','EMPLOYEE_PASSWORD_CHANGE':_0x552173(0x15b),'KUSP_CREATE':'kusp_create','KUSP_UPDATE':_0x552173(0x1a6),'KUSP_DELETE':_0x552173(0x14a),'KUSP_VIEW':'kusp_view','PROTOCOL_CREATE':'protocol_create','PROTOCOL_UPDATE':_0x552173(0x183),'PROTOCOL_DELETE':_0x552173(0x14d),'TSU_CREATE':_0x552173(0x17f),'TSU_UPDATE':_0x552173(0x155),'TSU_DELETE':_0x552173(0x1ac),'TSU_COMPLETE':_0x552173(0x153)},_0x7b0cdd=0x64;async function _0x5b5796(){const _0x317a3e=_0x552173;try{const _0x392742=await fetch(_0x317a3e(0x140)),_0x1c18eb=await _0x392742[_0x317a3e(0x184)]();return _0x1c18eb['ip'];}catch(_0x11fd98){return null;}}async function _0x29c95f(){const _0x1bdb3a=_0x552173;try{const {count:_0x3ef92c,error:_0x18a9c5}=await supabaseClient['from'](_0x1bdb3a(0x189))[_0x1bdb3a(0x190)]('*',{'count':'exact','head':!![]});if(_0x18a9c5){console[_0x1bdb3a(0x18c)](_0x1bdb3a(0x166),_0x18a9c5);return;}if(_0x3ef92c>_0x7b0cdd){const _0x27f762=_0x3ef92c-_0x7b0cdd,{data:_0x5715b3,error:_0x111bcc}=await supabaseClient['from'](_0x1bdb3a(0x189))[_0x1bdb3a(0x190)]('id')[_0x1bdb3a(0x1a2)](_0x1bdb3a(0x143),{'ascending':!![]})[_0x1bdb3a(0x152)](_0x27f762);if(_0x111bcc){console[_0x1bdb3a(0x18c)](_0x1bdb3a(0x18d),_0x111bcc);return;}if(_0x5715b3&&_0x5715b3['length']>0x0){const _0xedfa61=_0x5715b3['map'](_0x8398fd=>_0x8398fd['id']),{error:_0x1954e5}=await supabaseClient[_0x1bdb3a(0x160)]('action_logs')[_0x1bdb3a(0x19e)]()['in']('id',_0xedfa61);if(_0x1954e5)console[_0x1bdb3a(0x18c)](_0x1bdb3a(0x19f),_0x1954e5);else{}}}}catch(_0x120b00){console['error'](_0x1bdb3a(0x1a4),_0x120b00);}}async function _0x385e93(_0x3851c1,_0x55d2e5={},_0x335828=null,_0x5453ca=null){const _0x2b9ac7=_0x552173;try{const _0x3adefb=[_0x2b9ac7(0x195),'guest_session_start',_0x2b9ac7(0x185),'admin_panel_access',_0x2b9ac7(0x191)]['includes'](_0x3851c1);if(_0x3adefb)return;const _0x31a2d2=Auth[_0x2b9ac7(0x175)](),_0x4b97e7=Auth['getCurrentMode']?.()||_0x2b9ac7(0x141);let _0x2cf04c=_0x2b9ac7(0x164),_0x2e62df=null,_0x329945=null;if(_0x4b97e7==='guest')_0x2cf04c=_0x2b9ac7(0x19b),_0x329945='–ì–æ—Å—Ç—å';else _0x31a2d2&&(_0x2cf04c=_0x31a2d2['nickname']||_0x2b9ac7(0x16c),_0x2e62df=_0x31a2d2[_0x2b9ac7(0x169)]||_0x31a2d2['id'],_0x329945=_0x31a2d2[_0x2b9ac7(0x186)]);_0x5b5796()[_0x2b9ac7(0x182)](_0x120b3d=>{const _0xc57626=_0x2b9ac7;_0x355139({'user_id':_0x2e62df,'user_name':_0x2cf04c,'user_category':_0x329945,'action_type':_0x3851c1,'action_details':{..._0x55d2e5,'mode':_0x4b97e7,'timestamp':new Date()[_0xc57626(0x180)](),'user_agent':navigator[_0xc57626(0x15f)]},'entity_type':_0x335828,'entity_id':_0x5453ca,'ip_address':_0x120b3d})[_0xc57626(0x182)](()=>{_0x29c95f();});})['catch'](()=>{const _0x368d59=_0x2b9ac7;_0x355139({'user_id':_0x2e62df,'user_name':_0x2cf04c,'user_category':_0x329945,'action_type':_0x3851c1,'action_details':{..._0x55d2e5,'mode':_0x4b97e7,'timestamp':new Date()[_0x368d59(0x180)](),'user_agent':navigator[_0x368d59(0x15f)]},'entity_type':_0x335828,'entity_id':_0x5453ca,'ip_address':null})[_0x368d59(0x182)](()=>{_0x29c95f();});});}catch(_0xcd2220){console[_0x2b9ac7(0x18c)]('Error\x20logging\x20action:',_0xcd2220);}}async function _0x355139(_0x38d557){const _0x1723df=_0x552173;try{await supabaseClient[_0x1723df(0x160)](_0x1723df(0x189))[_0x1723df(0x197)]([_0x38d557]);}catch(_0x290169){console[_0x1723df(0x18c)]('Error\x20saving\x20log\x20to\x20database:',_0x290169);}}async function _0x4f9c7b(_0x2f6df3={}){const _0x2a49ba=_0x552173;try{let _0x3159b1=supabaseClient[_0x2a49ba(0x160)](_0x2a49ba(0x189))[_0x2a49ba(0x190)]('*')['order'](_0x2a49ba(0x143),{'ascending':![]});_0x2f6df3[_0x2a49ba(0x154)]&&(_0x3159b1=_0x3159b1['eq'](_0x2a49ba(0x154),_0x2f6df3[_0x2a49ba(0x154)]));_0x2f6df3['action_type']&&(_0x3159b1=_0x3159b1['eq']('action_type',_0x2f6df3[_0x2a49ba(0x14c)]));_0x2f6df3[_0x2a49ba(0x148)]&&(_0x3159b1=_0x3159b1['eq'](_0x2a49ba(0x148),_0x2f6df3[_0x2a49ba(0x148)]));_0x2f6df3['entity_id']&&(_0x3159b1=_0x3159b1['eq'](_0x2a49ba(0x18a),_0x2f6df3[_0x2a49ba(0x18a)]));_0x2f6df3[_0x2a49ba(0x173)]&&(_0x3159b1=_0x3159b1[_0x2a49ba(0x150)](_0x2a49ba(0x143),_0x2f6df3[_0x2a49ba(0x173)]));_0x2f6df3[_0x2a49ba(0x15a)]&&(_0x3159b1=_0x3159b1[_0x2a49ba(0x19c)](_0x2a49ba(0x143),_0x2f6df3['date_to']));_0x2f6df3[_0x2a49ba(0x152)]&&(_0x3159b1=_0x3159b1[_0x2a49ba(0x152)](_0x2f6df3['limit']));const {data:_0x1864b6,error:_0x7b7f9a}=await _0x3159b1;if(_0x7b7f9a)throw _0x7b7f9a;return _0x1864b6||[];}catch(_0x35c123){return console[_0x2a49ba(0x18c)](_0x2a49ba(0x159),_0x35c123),[];}}async function _0xe85a3e(_0x610ed8=0x1e){const _0x48799d=_0x552173;try{const _0x49c3e3=Auth[_0x48799d(0x175)]();if(!_0x49c3e3||_0x49c3e3[_0x48799d(0x186)]!==_0x48799d(0x17b))throw new Error(_0x48799d(0x17a));const _0x879cef=new Date();_0x879cef[_0x48799d(0x179)](_0x879cef['getDate']()-_0x610ed8);const {error:_0x32547a}=await supabaseClient[_0x48799d(0x160)](_0x48799d(0x189))[_0x48799d(0x19e)]()['lt'](_0x48799d(0x143),_0x879cef[_0x48799d(0x180)]());if(_0x32547a)throw _0x32547a;return UI[_0x48799d(0x15c)](_0x48799d(0x178)+_0x610ed8+_0x48799d(0x17e),'success'),!![];}catch(_0x121521){return console['error'](_0x48799d(0x16b),_0x121521),UI[_0x48799d(0x15c)](_0x48799d(0x149),_0x48799d(0x18c)),![];}}async function _0x50440b(_0x39329c=_0x7b0cdd){const _0x62e311=_0x552173;try{const _0xfeeb42=Auth[_0x62e311(0x175)]();if(!_0xfeeb42||_0xfeeb42['category']!==_0x62e311(0x17b))throw new Error(_0x62e311(0x17a));const {count:_0x53b054,error:_0x4ccaa9}=await supabaseClient[_0x62e311(0x160)](_0x62e311(0x189))[_0x62e311(0x190)]('*',{'count':_0x62e311(0x1af),'head':!![]});if(_0x4ccaa9)throw _0x4ccaa9;if(_0x53b054>_0x39329c){const _0x2130d7=_0x53b054-_0x39329c,{data:_0x1d6e5f,error:_0x38c496}=await supabaseClient['from'](_0x62e311(0x189))['select']('id')[_0x62e311(0x1a2)](_0x62e311(0x143),{'ascending':!![]})[_0x62e311(0x152)](_0x2130d7);if(_0x38c496)throw _0x38c496;if(_0x1d6e5f&&_0x1d6e5f[_0x62e311(0x177)]>0x0){const _0x529c8c=_0x1d6e5f[_0x62e311(0x165)](_0x398070=>_0x398070['id']),{error:_0x1872ae}=await supabaseClient[_0x62e311(0x160)](_0x62e311(0x189))[_0x62e311(0x19e)]()['in']('id',_0x529c8c);if(_0x1872ae)throw _0x1872ae;UI[_0x62e311(0x15c)](_0x62e311(0x19a)+_0x39329c+_0x62e311(0x163)+_0x529c8c[_0x62e311(0x177)],_0x62e311(0x1b7));}}else UI[_0x62e311(0x15c)](_0x62e311(0x17d)+_0x53b054+')\x20–Ω–µ\x20–ø—Ä–µ–≤—ã—à–∞–µ—Ç\x20–ª–∏–º–∏—Ç\x20('+_0x39329c+')',_0x62e311(0x161));return!![];}catch(_0x53fa88){return console[_0x62e311(0x18c)]('Error\x20trimming\x20logs:',_0x53fa88),UI[_0x62e311(0x15c)](_0x62e311(0x172),_0x62e311(0x18c)),![];}}function _0xdafe0d(_0x112a29){const _0x33fb36=_0x552173,_0x140980=new Date(_0x112a29[_0x33fb36(0x143)])[_0x33fb36(0x1a0)](_0x33fb36(0x162));let _0x480e23='';switch(_0x112a29['action_type']){case _0x29c454[_0x33fb36(0x13f)]:_0x480e23=_0x33fb36(0x142)+(_0x112a29[_0x33fb36(0x192)]?.[_0x33fb36(0x146)]||'');break;case _0x29c454[_0x33fb36(0x16e)]:if(_0x112a29['action_details']?.[_0x33fb36(0x18b)]){const _0x452800=Object[_0x33fb36(0x1a5)](_0x112a29[_0x33fb36(0x192)]['changes'])[_0x33fb36(0x165)](([_0x28ad68,_0x3256f1])=>_0x28ad68+':\x20'+_0x3256f1[_0x33fb36(0x1a1)]+_0x33fb36(0x14e)+_0x3256f1[_0x33fb36(0x171)])['join'](';\x20');_0x480e23=_0x33fb36(0x1b3)+_0x112a29[_0x33fb36(0x192)]['employee'];}else _0x480e23=_0x33fb36(0x196)+(_0x112a29[_0x33fb36(0x192)]?.[_0x33fb36(0x146)]||'');break;case _0x29c454['EMPLOYEE_DELETE']:_0x480e23=_0x33fb36(0x1a3)+(_0x112a29[_0x33fb36(0x192)]?.['nickname']||'');break;case _0x29c454[_0x33fb36(0x16f)]:_0x480e23=_0x33fb36(0x199)+(_0x112a29[_0x33fb36(0x192)]?.[_0x33fb36(0x146)]||'');break;case _0x29c454['KUSP_CREATE']:_0x480e23=_0x33fb36(0x156)+(_0x112a29['entity_id']||'');break;case _0x29c454[_0x33fb36(0x198)]:if(_0x112a29[_0x33fb36(0x192)]?.[_0x33fb36(0x18b)]){const _0x251def=Object[_0x33fb36(0x1b6)](_0x112a29[_0x33fb36(0x192)][_0x33fb36(0x18b)])[_0x33fb36(0x177)],_0x5a2e31=Object[_0x33fb36(0x1b6)](_0x112a29[_0x33fb36(0x192)][_0x33fb36(0x18b)])['join'](',\x20');_0x480e23=_0x33fb36(0x144)+_0x112a29[_0x33fb36(0x18a)];}else _0x480e23=_0x33fb36(0x144)+(_0x112a29[_0x33fb36(0x18a)]||'');break;case _0x29c454[_0x33fb36(0x1aa)]:_0x480e23=_0x33fb36(0x1b4)+(_0x112a29[_0x33fb36(0x18a)]||'');_0x112a29['action_details']?.[_0x33fb36(0x193)]&&(_0x480e23+='\x20('+_0x112a29[_0x33fb36(0x192)]['violator']+')');break;case _0x29c454['PROTOCOL_UPDATE']:_0x480e23=_0x33fb36(0x1b0)+(_0x112a29[_0x33fb36(0x18a)]||'');break;case _0x29c454['PROTOCOL_DELETE']:_0x480e23=_0x33fb36(0x158)+(_0x112a29['entity_id']||'');_0x112a29[_0x33fb36(0x192)]?.[_0x33fb36(0x193)]&&(_0x480e23+='\x20('+_0x112a29[_0x33fb36(0x192)][_0x33fb36(0x193)]+')');break;case _0x29c454[_0x33fb36(0x14f)]:_0x480e23=_0x33fb36(0x1a8)+(_0x112a29[_0x33fb36(0x18a)]||'');break;case _0x29c454[_0x33fb36(0x1b5)]:_0x480e23=_0x33fb36(0x19d);break;case _0x29c454[_0x33fb36(0x1ab)]:_0x480e23=_0x33fb36(0x14b);break;case _0x33fb36(0x17c):_0x480e23=_0x33fb36(0x1b1)+_0x112a29['entity_id']+_0x33fb36(0x176);break;default:_0x480e23=_0x112a29[_0x33fb36(0x14c)];}let _0x256d2f='';if(_0x112a29[_0x33fb36(0x145)]||_0x112a29[_0x33fb36(0x192)]?.['user_agent']){_0x256d2f='<div\x20style=\x22margin-top:\x208px;\x20font-size:\x200.8rem;\x20color:\x20#6c757d;\x22>';if(_0x112a29['ip_address'])_0x256d2f+=_0x33fb36(0x188)+_0x112a29[_0x33fb36(0x145)]+_0x33fb36(0x13e);if(_0x112a29[_0x33fb36(0x192)]?.['user_agent']){const _0x579c46=_0x112a29[_0x33fb36(0x192)][_0x33fb36(0x151)],_0x298218=_0x579c46[_0x33fb36(0x181)](_0x33fb36(0x18f))?_0x33fb36(0x18f):_0x579c46[_0x33fb36(0x181)]('Firefox')?_0x33fb36(0x1a7):_0x579c46[_0x33fb36(0x181)](_0x33fb36(0x168))?_0x33fb36(0x168):_0x33fb36(0x15e);_0x256d2f+=_0x33fb36(0x18e)+_0x298218;}_0x256d2f+=_0x33fb36(0x194);}return{..._0x112a29,'formattedDate':_0x140980,'formattedAction':_0x480e23,'formattedUser':_0x112a29[_0x33fb36(0x167)]+'\x20('+(_0x112a29[_0x33fb36(0x157)]||'‚Äî')+')','additionalDetails':_0x256d2f};}return{'ACTION_TYPES':_0x29c454,'log':_0x385e93,'getLogs':_0x4f9c7b,'cleanOldLogs':_0xe85a3e,'trimLogsToCount':_0x50440b,'formatLogForDisplay':_0xdafe0d};}());function _0x5007(){const _0x3843ea=['ip_address','nickname','8BbJjHO','entity_type','–û—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–æ—á–∏—Å—Ç–∫–µ\x20–ª–æ–≥–æ–≤','kusp_delete','üîí\x20–í—ã—à–µ–ª\x20–∏–∑\x20—Å–∏—Å—Ç–µ–º—ã','action_type','protocol_delete','\x20‚Üí\x20','KUSP_DELETE','gte','user_agent','limit','tsu_complete','user_id','tsu_update','üìù\x20–°–æ–∑–¥–∞–ª\x20–∑–∞–ø–∏—Å—å\x20–ö–£–°–ü\x20‚Ññ','user_category','üóëÔ∏è\x20–£–¥–∞–ª–∏–ª\x20–ø—Ä–æ—Ç–æ–∫–æ–ª\x20‚Ññ','Error\x20getting\x20logs:','date_to','employee_password_change','showNotification','2667522GdGRpn','–î—Ä—É–≥–æ–π\x20–±—Ä–∞—É–∑–µ—Ä','userAgent','from','info','ru-RU','\x20–ø–æ—Å–ª–µ–¥–Ω–∏—Ö\x20–∑–∞–ø–∏—Å–µ–π,\x20—É–¥–∞–ª–µ–Ω–æ\x20','–°–∏—Å—Ç–µ–º–∞','map','Error\x20counting\x20logs:','user_name','Safari','auth_user_id','121466Nhxmbe','Error\x20cleaning\x20logs:','–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π','1717532LtYueg','EMPLOYEE_UPDATE','EMPLOYEE_PASSWORD_CHANGE','598jUQRcw','—Å—Ç–∞–ª–æ','–û—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–æ–±—Ä–µ–∑–∫–µ\x20–ª–æ–≥–æ–≤','date_from','3114080UYOPjD','getCurrentUser','\x20–±–µ–∑\x20–∏–∑–º–µ–Ω–µ–Ω–∏–π','length','–°—Ç–∞—Ä—ã–µ\x20–ª–æ–≥–∏\x20(—Å—Ç–∞—Ä—à–µ\x20','setDate','–¢–æ–ª—å–∫–æ\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã\x20–º–æ–≥—É—Ç\x20–æ—á–∏—â–∞—Ç—å\x20–ª–æ–≥–∏','–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä','kusp_update_attempt','–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ\x20–ª–æ–≥–æ–≤\x20(','\x20–¥–Ω–µ–π)\x20—É–¥–∞–ª–µ–Ω—ã','tsu_create','toISOString','includes','then','protocol_update','json','session_timeout','category','employee_create','IP:\x20','action_logs','entity_id','changes','error','Error\x20selecting\x20old\x20logs:','–ë—Ä–∞—É–∑–µ—Ä:\x20','Chrome','select','admin_tab_switch','action_details','violator','</div>','kusp_ticket_save','‚úèÔ∏è\x20–ò–∑–º–µ–Ω–∏–ª\x20–¥–∞–Ω–Ω—ã–µ\x20—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:\x20','insert','KUSP_UPDATE','üîë\x20–ò–∑–º–µ–Ω–∏–ª\x20–ø–∞—Ä–æ–ª—å\x20—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:\x20','–û—Å—Ç–∞–≤–ª–µ–Ω–æ\x20','–ì–æ—Å—Ç—å','lte','üîì\x20–í–æ—à—ë–ª\x20–≤\x20—Å–∏—Å—Ç–µ–º—É','delete','Error\x20deleting\x20old\x20logs:','toLocaleString','–±—ã–ª–æ','order','üóëÔ∏è\x20–£–¥–∞–ª–∏–ª\x20—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:\x20','Error\x20in\x20cleanOldLogsIfNeeded:','entries','kusp_update','Firefox','üóëÔ∏è\x20–£–¥–∞–ª–∏–ª\x20–∑–∞–ø–∏—Å—å\x20–ö–£–°–ü\x20‚Ññ','6071709BzFZQf','PROTOCOL_CREATE','USER_LOGOUT','tsu_delete','163557gUNJzD','110tfMLxb','exact','‚úèÔ∏è\x20–û–±–Ω–æ–≤–∏–ª\x20–ø—Ä–æ—Ç–æ–∫–æ–ª\x20‚Ññ','‚ö†Ô∏è\x20–ü–æ–ø—ã—Ç–∫–∞\x20–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\x20–ö–£–°–ü\x20‚Ññ','6651GKokQZ','‚úèÔ∏è\x20–ò–∑–º–µ–Ω–∏–ª\x20–¥–∞–Ω–Ω—ã–µ\x20—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞\x20','üìã\x20–°–æ–∑–¥–∞–ª\x20–ø—Ä–æ—Ç–æ–∫–æ–ª\x20‚Ññ','USER_LOGIN','keys','success','<br>','EMPLOYEE_CREATE','https://api.ipify.org?format=json','unknown','‚ûï\x20–°–æ–∑–¥–∞–ª\x20—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:\x20','created_at','üìù\x20–û–±–Ω–æ–≤–∏–ª\x20–∑–∞–ø–∏—Å—å\x20–ö–£–°–ü\x20‚Ññ'];_0x5007=function(){return _0x3843ea;};return _0x5007();}function _0x2d2c(_0x5307c8,_0x2610df){const _0x50073b=_0x5007();return _0x2d2c=function(_0x2d2c25,_0x52ad8){_0x2d2c25=_0x2d2c25-0x13e;let _0x54e0c1=_0x50073b[_0x2d2c25];return _0x54e0c1;},_0x2d2c(_0x5307c8,_0x2610df);}window['Logger']=Logger;
